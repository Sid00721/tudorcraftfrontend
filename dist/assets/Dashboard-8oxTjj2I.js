import{d as _e,g as We,r as x,h as De,j as e,i as Me,k as Ie,m as Ee,n as Re,f as ze,t as Se,v as Ce,q as X,w as Fe,T as i,B as a,b as T,s as I,x as Le,C as M,a as z,I as Be,y as Z,M as D,c as ie,F as Pe,z as ue,L as U,S as he,A as le,E as Ne,G as se}from"./index-3v-V_ujV.js";import{P as Te,G as ke,A as Oe,I as Ge}from"./PhoneNumberInput-Z0uAPUKV.js";import{G as l}from"./Grid-CWEeYFsZ.js";import{T as W,F as N,I as q,S as J,a as te}from"./TextField-D9X8XuqD.js";import{D as He}from"./DateTimePicker-DPJ1KOfC.js";import{D as $e}from"./Delete-CFLk6tfJ.js";import{S as Ue,P as xe}from"./Search-TvqwLMnr.js";import{u as qe,a as Je}from"./usePageTitle-seETqNZq.js";import{E as re}from"./Email-B3e4zQ06.js";import{Z as V,P as Ve}from"./PersonAdd-3Tmo8nog.js";import{A as Ke}from"./CheckCircle-DhXPYKmg.js";import{T as me,a as pe,b as be,c as K,d as p,e as ge}from"./TableRow-Ch5q5_jA.js";import{L as ae}from"./LocationOn-CTLLtjOz.js";import{V as je}from"./Visibility-CjhNTLSy.js";import{A as Ye}from"./Add-BLHWnkwj.js";import{D as Ze,a as Xe,b as Qe,c as es}from"./DialogTitle-DjXGIgXC.js";import{L as ne}from"./ListItem-Da3YSJce.js";import"./Close-BLRrZJzV.js";import"./useControlled-2upcAsfy.js";import"./isMuiElement-Dd43ylT-.js";function ss(o){return String(o).match(/[\d.\-+]*\s*(.*)/)[1]||""}function ts(o){return parseFloat(o)}function rs(o){return _e("MuiSkeleton",o)}We("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const as=o=>{const{classes:h,variant:d,animation:c,hasChildren:u,width:S,height:C}=o;return Ee({root:["root",d,c,u&&"withChildren",u&&!S&&"fitContent",u&&!C&&"heightAuto"]},rs,h)},oe=Ce`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,de=Ce`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,ns=typeof oe!="string"?Se`
        animation: ${oe} 2s ease-in-out 0.5s infinite;
      `:null,is=typeof de!="string"?Se`
        &::after {
          animation: ${de} 2s linear 0.5s infinite;
        }
      `:null,ls=Me("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(o,h)=>{const{ownerState:d}=o;return[h.root,h[d.variant],d.animation!==!1&&h[d.animation],d.hasChildren&&h.withChildren,d.hasChildren&&!d.width&&h.fitContent,d.hasChildren&&!d.height&&h.heightAuto]}})(Re(({theme:o})=>{const h=ss(o.shape.borderRadius)||"px",d=ts(o.shape.borderRadius);return{display:"block",backgroundColor:o.vars?o.vars.palette.Skeleton.bg:ze(o.palette.text.primary,o.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${d}${h}/${Math.round(d/.6*10)/10}${h}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(o.vars||o).shape.borderRadius}},{props:({ownerState:c})=>c.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:c})=>c.hasChildren&&!c.width,style:{maxWidth:"fit-content"}},{props:({ownerState:c})=>c.hasChildren&&!c.height,style:{height:"auto"}},{props:{animation:"pulse"},style:ns||{animation:`${oe} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(o.vars||o).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:is||{"&::after":{animation:`${de} 2s linear 0.5s infinite`}}}]}})),fe=x.forwardRef(function(h,d){const c=De({props:h,name:"MuiSkeleton"}),{animation:u="pulse",className:S,component:C="span",height:v,style:k,variant:y="text",width:A,...b}=c,g={...c,animation:u,component:C,variant:y,hasChildren:!!b.children},j=as(g);return e.jsx(ls,{as:C,ref:d,className:Ie(j.root,S),ownerState:g,...b,style:{width:A,height:v,...k}})}),os=X(e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),ds=X(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),ye=X(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),cs=X(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}));function us({onTutorAdded:o,onCancel:h}){const[d,c]=x.useState(!1),[u,S]=x.useState(""),[C,v]=x.useState(""),[k,y]=x.useState(""),[A,b]=x.useState(""),g=async j=>{j.preventDefault(),c(!0);const{error:E}=await I.from("tutors").insert([{full_name:u,email:C,phone_number:k,suburb:A}]);E?alert("Error adding tutor: "+E.message):o(),c(!1)};return e.jsxs(Fe,{sx:{p:4,maxWidth:600,margin:"auto",mt:4},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"Add New Tutor"}),e.jsx("form",{onSubmit:g,children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(W,{label:"Full Name",value:u,onChange:j=>S(j.target.value),fullWidth:!0,required:!0})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(W,{label:"Email",type:"email",value:C,onChange:j=>v(j.target.value),fullWidth:!0,required:!0})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(Te,{label:"Phone Number",value:k,onChange:j=>y(j.target.value),fullWidth:!0,required:!0,helperText:"Australian phone number for contact purposes"})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(ke,{value:A,onChange:j=>b(j),label:"Suburb",placeholder:"Start typing the tutor's suburb or area...",helperText:"Enter the suburb or area where the tutor is located",types:["(cities)"],componentRestrictions:{country:"AU"}})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(T,{type:"button",onClick:h,disabled:d,variant:"outlined",children:"Cancel"}),e.jsx(T,{type:"submit",disabled:d,variant:"contained",children:d?"Saving...":"Save Tutor"})]})})]})})]})}function hs({onTrialRequestAdded:o,onCancel:h}){const d=Le(),[c,u]=x.useState(!1),[S,C]=x.useState({}),[v,k]=x.useState([]),[y,A]=x.useState({parent_name:"",parent_email:"",parent_phone:"",location:""}),[b,g]=x.useState([{student_name:"",student_grade:"",subject_id:null,lesson_datetime:new Date,duration_minutes:60,student_level:"",unit_module:"",english_text:"",lesson_timezone:"Australia/Sydney"}]),j=[{value:"Australia/Sydney",label:"NSW/VIC/ACT/TAS (AEST)"},{value:"Australia/Brisbane",label:"QLD (AEST)"},{value:"Australia/Adelaide",label:"SA (ACST)"},{value:"Australia/Darwin",label:"NT (ACST)"},{value:"Australia/Perth",label:"WA (AWST)"}],E=[{value:"catching_up",label:"Catching Up"},{value:"holding_steady",label:"Holding Steady"},{value:"ready_to_excel",label:"Ready to Excel"}],L={NSW:["To Kill a Mockingbird by Harper Lee","Jasper Jones by Craig Silvey","Great Gatsby by F. Scott Fitzgerald","The Catcher in the Rye by J.D. Salinger","The Hunger Games by Suzanne Collins","Romeo and Juliet","The Crucible","A Doll's House by Henrik Ibsen","Of Mice and Men by John Steinbeck","Looking for Alibrandi by Melina Marchetta","The Secret River by Kate Grenville","The White Tiger by Aravind Adiga","Animal Farm by George Orwell","The Book Thief by Markus Zusak","A Streetcar Named Desire by Tennessee Williams","The Removalists by David Williamson","Macbeth by William Shakespeare","Waiting for Godot by Samuel Beckett","Death of a Salesman by Arthur Miller","Plath and Hughes","TS Eliot","Keats and Campion","The Matrix (film)","Dead Poets Society (film)","Rabbit-Proof Fence (film)","The Dressmaker (film)","Lion (film)","Paradise Lost by John Milton","Oedipus Rex by Sophocles","King Lear by William Shakespeare","Othello by William Shakespeare"],VIC:["Regeneration by Pat Barker","Jane Eyre by Charlotte Brontë","My Brilliant Career by Miles Franklin","Chronicle of a Death Foretold by Gabriel García Márquez","Orbital by Samantha Harvey","We Have Always Lived in the Castle by Shirley Jackson","Ghost Wall by Sarah Moss","The Memory Police by Yōko Ogawa","Bad Dreams and Other Stories by Tessa Hadley","The Complete Stories by David Malouf","Rainbow's End by Jane Harrison","Twelfth Night by William Shakespeare","Oedipus the King by Sophocles","Selected Poems by Langston Hughes","New and Selected Poems, Volume One by Mary Oliver","High Ground (film)","Sunset Boulevard (film)","Requiem for a Beast by Matt Ottley","We Come with This Place by Debra Dank","Born a Crime by Trevor Noah","Macbeth by William Shakespeare"],QLD:["To Kill a Mockingbird by Harper Lee","The Great Gatsby by F. Scott Fitzgerald","Romeo and Juliet by William Shakespeare","Macbeth by William Shakespeare","Othello by William Shakespeare","The Crucible by Arthur Miller","A Streetcar Named Desire by Tennessee Williams","Death of a Salesman by Arthur Miller","Animal Farm by George Orwell","The Book Thief by Markus Zusak","Looking for Alibrandi by Melina Marchetta"],WA:["To Kill a Mockingbird by Harper Lee","The Great Gatsby by F. Scott Fitzgerald","Romeo and Juliet by William Shakespeare","Macbeth by William Shakespeare","The Crucible by Arthur Miller","Animal Farm by George Orwell","The Book Thief by Markus Zusak"],SA:["To Kill a Mockingbird by Harper Lee","The Great Gatsby by F. Scott Fitzgerald","Romeo and Juliet by William Shakespeare","Macbeth by William Shakespeare","The Crucible by Arthur Miller","Animal Farm by George Orwell"],ACT:["To Kill a Mockingbird by Harper Lee","The Great Gatsby by F. Scott Fitzgerald","Romeo and Juliet by William Shakespeare","Macbeth by William Shakespeare","The Crucible by Arthur Miller","Animal Farm by George Orwell"]},w=r=>{if(!r)return null;const t=r.toLowerCase();return t.includes("nsw")?"NSW":t.includes("vic")?"VIC":t.includes("qld")?"QLD":t.includes("wa")?"WA":t.includes("sa")?"SA":t.includes("act")?"ACT":null},B=(r,t)=>{if(!r||!t)return!1;const s=r.toLowerCase();return(t.toLowerCase().includes("year 11")||t.toLowerCase().includes("year 12")||t==="11"||t==="12")&&(s.includes("chemistry")||s.includes("physics")||s.includes("biology"))},O=r=>r?r.toLowerCase().includes("english"):!1;x.useEffect(()=>{(async()=>{const{data:t,error:s}=await I.from("subjects").select("id, name, state_curriculum, level, subject_group").order("name");if(s){console.error("Error fetching subjects:",s);return}k(t||[]);const m=(t||[]).reduce((f,Q)=>{const{id:Ae,state_curriculum:_,level:R,subject_group:we,name:ce}=Q;if(!_||!R||!ce)return f;f[_]=f[_]||{},f[_][R]=f[_][R]||{};const ee=we||"General Subjects";return f[_][R][ee]=f[_][R][ee]||[],f[_][R][ee].push({id:Ae,name:ce}),f},{});C(m)})()},[]);const P=r=>{const{name:t,value:s}=r.target;A(m=>({...m,[t]:s}))},F=(r,t,s)=>{const m=[...b];m[r][t]=s,g(m)},G=()=>{g([...b,{student_name:"",student_grade:"",subject_id:null,lesson_datetime:new Date,duration_minutes:60,student_level:"",unit_module:"",english_text:"",lesson_timezone:"Australia/Sydney"}])},H=r=>{if(b.length<=1)return;const t=b.filter((s,m)=>m!==r);g(t)},$=async r=>{r.preventDefault(),u(!0);try{const{data:t,error:s}=await I.from("trial_sessions").insert([y]).select().single();if(s)throw s;const m=b.map(Q=>({...Q,session_id:t.id})),{error:f}=await I.from("trial_lessons").insert(m);if(f)throw f;alert("Trial session created successfully!"),o?o():d("/")}catch(t){console.error("Error creating trial session:",t),alert("Error: "+t.message)}finally{u(!1)}},n=r=>{const t=v.find(s=>s.id===r);return t?t.name:"Unknown Subject"};return e.jsxs(Fe,{sx:{p:4,maxWidth:900,margin:"auto",mt:4},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"Create New Trial Session"}),e.jsxs("form",{onSubmit:$,children:[e.jsx(i,{variant:"h6",sx:{mt:2,mb:2},children:"Parent & Session Details"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{size:{xs:12,sm:6},children:e.jsx(W,{name:"parent_name",label:"Parent Name",value:y.parent_name,onChange:P,fullWidth:!0,required:!0})}),e.jsx(l,{size:{xs:12,sm:6},children:e.jsx(W,{name:"parent_email",label:"Parent Email",type:"email",value:y.parent_email,onChange:P,fullWidth:!0})}),e.jsx(l,{size:{xs:12,sm:6},children:e.jsx(Te,{name:"parent_phone",label:"Parent Phone",value:y.parent_phone,onChange:P,fullWidth:!0,helperText:"Australian phone number for session updates"})}),e.jsx(l,{size:{xs:12,sm:6},children:e.jsx(ke,{value:y.location,onChange:r=>A({...y,location:r}),label:"Location",placeholder:"Start typing an address or enter 'Online'...",required:!0,helperText:"Enter a full address for in-person sessions, or type 'Online' for virtual sessions",types:["address"],componentRestrictions:{country:"AU"}})})]}),e.jsx(i,{variant:"h6",sx:{mt:4,mb:2},children:"Lessons"}),b.map((r,t)=>e.jsx(M,{sx:{mb:2,position:"relative",border:"1px solid #ddd"},children:e.jsxs(z,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{variant:"subtitle1",gutterBottom:!0,children:["Lesson ",t+1]}),b.length>1&&e.jsx(Be,{onClick:()=>H(t),size:"small",children:e.jsx($e,{})})]}),e.jsxs(l,{container:!0,spacing:2,sx:{mt:0},children:[e.jsx(l,{size:{xs:12,sm:6,md:4},children:e.jsx(W,{name:"student_name",label:"Student Name",value:r.student_name||"",onChange:s=>F(t,"student_name",s.target.value),fullWidth:!0,required:!0})}),e.jsx(l,{size:{xs:12,sm:6,md:4},children:e.jsx(W,{name:"student_grade",label:"Student Grade",value:r.student_grade,onChange:s=>F(t,"student_grade",s.target.value),fullWidth:!0,required:!0})}),e.jsx(l,{size:{xs:12,sm:6,md:4},children:e.jsx(W,{name:"duration_minutes",label:"Duration (mins)",type:"number",value:r.duration_minutes,onChange:s=>F(t,"duration_minutes",s.target.value),fullWidth:!0,required:!0})}),e.jsx(l,{size:{xs:12,sm:6},children:e.jsx(a,{sx:{pt:1},children:e.jsx(He,{onChange:s=>F(t,"lesson_datetime",s),value:r.lesson_datetime,disableClock:!0})})}),e.jsxs(l,{size:{xs:12},children:[e.jsx(N,{fullWidth:!0,required:!0,children:e.jsx(Oe,{options:v,groupBy:s=>`${s.state_curriculum} - ${s.level}`,getOptionLabel:s=>s.name,value:v.find(s=>s.id===r.subject_id)||null,onChange:(s,m)=>{F(t,"subject_id",m?m.id:null)},renderInput:s=>e.jsx(W,{...s,label:"Subject",required:!0,InputProps:{...s.InputProps,startAdornment:e.jsx(Ge,{position:"start",children:e.jsx(Ue,{})})}}),renderOption:(s,m)=>e.jsx(a,{component:"li",...s,children:e.jsxs(a,{children:[e.jsx(i,{variant:"body1",fontWeight:"bold",children:m.name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:[m.state_curriculum," • ",m.level,m.subject_group&&` • ${m.subject_group}`]})]})}),renderGroup:s=>e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle2",sx:{px:2,py:1,bgcolor:"grey.100",fontWeight:"bold",position:"sticky",top:0,zIndex:1},children:s.group}),s.children]},s.key),ListboxProps:{style:{maxHeight:"300px"}},noOptionsText:"No subjects found",placeholder:"Search and select subject..."})}),r.subject_id&&e.jsx(a,{mt:1,children:e.jsx(Z,{label:n(r.subject_id),color:"primary",variant:"outlined",size:"small"})})]}),e.jsx(l,{size:{xs:12,sm:6},children:e.jsxs(N,{fullWidth:!0,required:!0,children:[e.jsx(q,{children:"Student Level"}),e.jsx(J,{value:r.student_level||"",label:"Student Level",onChange:s=>F(t,"student_level",s.target.value),children:E.map(s=>e.jsx(D,{value:s.value,children:s.label},s.value))}),e.jsx(te,{children:"How is the student currently performing?"})]})}),B(n(r.subject_id),r.student_grade)&&e.jsx(l,{size:{xs:12,sm:6},children:e.jsxs(N,{fullWidth:!0,children:[e.jsx(q,{children:"Unit/Module (Optional)"}),e.jsxs(J,{value:r.unit_module||"",label:"Unit/Module (Optional)",onChange:s=>F(t,"unit_module",s.target.value),children:[e.jsx(D,{value:"",children:"Not specified"}),w(n(r.subject_id))==="NSW"?[1,2,3,4,5,6,7,8].map(s=>e.jsxs(D,{value:`Module ${s}`,children:["Module ",s]},s)):[1,2,3,4].map(s=>e.jsxs(D,{value:`Unit ${s}`,children:["Unit ",s]},s))]}),e.jsx(te,{children:w(n(r.subject_id))==="NSW"?"NSW: Modules 1-4 (Yr 11), 5-8 (Yr 12)":"Units 1-2 (Yr 11), 3-4 (Yr 12)"})]})}),O(n(r.subject_id))&&e.jsx(l,{size:{xs:12},children:e.jsxs(N,{fullWidth:!0,children:[e.jsx(q,{children:"English Text (Optional)"}),e.jsxs(J,{value:r.english_text||"",label:"English Text (Optional)",onChange:s=>F(t,"english_text",s.target.value),children:[e.jsx(D,{value:"",children:"Not specified / Any text"}),(()=>{const s=w(n(r.subject_id))||"NSW";return(L[s]||L.NSW).map(f=>e.jsx(D,{value:f,children:f},f))})()]}),e.jsx(te,{children:"Select the specific text the student is studying"})]})}),e.jsx(l,{size:{xs:12,sm:6},children:e.jsxs(N,{fullWidth:!0,children:[e.jsx(q,{children:"Timezone"}),e.jsx(J,{value:r.lesson_timezone||"Australia/Sydney",label:"Timezone",onChange:s=>F(t,"lesson_timezone",s.target.value),children:j.map(s=>e.jsx(D,{value:s.value,children:s.label},s.value))})]})})]})]})},t)),e.jsx(T,{startIcon:e.jsx(os,{}),onClick:G,sx:{mt:1},children:"Add Another Lesson"}),e.jsxs(a,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(T,{type:"button",onClick:h,disabled:c,children:"Cancel"}),e.jsx(T,{type:"submit",variant:"contained",size:"large",disabled:c||b.some(r=>!r.subject_id||!r.student_level),children:c?e.jsx(ie,{size:24}):"Save Session"})]})]})]})}const Y=({title:o,value:h,icon:d,trend:c,color:u="primary",loading:S=!1})=>e.jsx(M,{className:"premium-card stats-card",sx:{height:"100%",background:`linear-gradient(135deg, ${u==="primary"?"rgba(255, 152, 0, 0.1)":"rgba(33, 150, 243, 0.1)"} 0%, ${u==="primary"?"rgba(33, 150, 243, 0.1)":"rgba(255, 152, 0, 0.1)"} 100%)`,border:`1px solid ${u==="primary"?"rgba(255, 152, 0, 0.2)":"rgba(33, 150, 243, 0.2)"}`},children:e.jsxs(z,{sx:{p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsx(le,{sx:{width:56,height:56,background:`linear-gradient(135deg, ${u==="primary"?"#FF9800":"#2196F3"} 0%, ${u==="primary"?"#F57C00":"#1976D2"} 100%)`,boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.15)"},children:e.jsx(d,{sx:{fontSize:28}})}),c&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(cs,{sx:{fontSize:16,color:"#4CAF50"}}),e.jsx(i,{variant:"caption",sx:{color:"#4CAF50",fontWeight:600},children:c})]})]}),S?e.jsxs(e.Fragment,{children:[e.jsx(fe,{variant:"text",width:"60%",height:48}),e.jsx(fe,{variant:"text",width:"80%",height:24})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h3",sx:{fontWeight:700,background:`linear-gradient(135deg, ${u==="primary"?"#FF9800":"#2196F3"} 0%, ${u==="primary"?"#F57C00":"#1976D2"} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",lineHeight:1,mb:1},children:h}),e.jsx(i,{variant:"body2",sx:{color:"text.secondary",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:o})]})]})}),ve=({title:o,action:h,children:d,loading:c=!1})=>e.jsx(M,{className:"premium-card",sx:{mb:4,border:"1px solid #E4E7EB",borderRadius:3,backgroundColor:"#FFFFFF"},children:e.jsxs(z,{sx:{p:0},children:[e.jsxs(a,{sx:{p:4,pb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:"#111827"},children:o}),h]}),c?e.jsx(a,{sx:{p:4},children:[...Array(3)].map((u,S)=>e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(a,{sx:{width:32,height:32,bgcolor:"#F4F6F8",borderRadius:"50%"}}),e.jsxs(a,{sx:{flex:1},children:[e.jsx(a,{sx:{width:"60%",height:16,bgcolor:"#F4F6F8",borderRadius:1,mb:1}}),e.jsx(a,{sx:{width:"40%",height:12,bgcolor:"#F4F6F8",borderRadius:1}})]}),e.jsx(a,{sx:{width:80,height:32,bgcolor:"#F4F6F8",borderRadius:1}})]},S))}):e.jsx(a,{className:"premium-table-container",sx:{borderRadius:0},children:d})]})});function Is(){var G,H,$;const[o,h]=x.useState(!0),[d,c]=x.useState([]),[u,S]=x.useState([]),[C,v]=x.useState(!1),[k,y]=x.useState(!1);qe(),x.useEffect(()=>{Je("admin")},[]);const[A,b]=x.useState(!1),[g,j]=x.useState(null),[E,L]=x.useState(!1),w={totalTutors:d.length,totalSessions:u.length,confirmedSessions:u.filter(n=>n.status==="Confirmed").length,pendingSessions:u.filter(n=>n.status==="Pending").length},B=x.useCallback(async()=>{h(!0);try{const{data:n}=await I.from("tutors").select("*").order("created_at",{ascending:!1});c(n||[]);const{data:r,error:t}=await I.from("trial_sessions").select("*, trial_lessons(*, subjects(name))").order("created_at",{ascending:!1});t&&console.error("Error fetching trial sessions:",t),S(r||[])}catch(n){console.error("Error fetching data:",n)}finally{h(!1)}},[]);x.useEffect(()=>{B()},[B]);const O=()=>{v(!1),y(!1),B()},P=async n=>{b(!0),L(!0);const{data:r,error:t}=await I.from("tutors").select("*, subjects (name)").eq("id",n).single();t?(console.error("Error fetching tutor details",t),alert("Could not load tutor details."),b(!1)):j(r),L(!1)},F=()=>{b(!1),j(null)};return o?e.jsx(a,{className:"premium-container",children:e.jsx(a,{className:"premium-loading",children:e.jsx(ie,{size:48})})}):e.jsx(a,{sx:{backgroundColor:"#FAFBFC",minHeight:"100vh"},children:e.jsx(a,{sx:{maxWidth:1200,mx:"auto",p:4},children:e.jsx(Pe,{in:!0,timeout:600,children:e.jsxs(a,{children:[e.jsxs(a,{sx:{mb:6},children:[e.jsx(i,{variant:"h3",sx:{fontWeight:700,color:"#111827",mb:2},children:"Dashboard"}),e.jsx(i,{variant:"body1",sx:{color:"#6B7280",mb:4},children:"Manage your tutoring platform with enterprise-grade tools"}),e.jsxs(ue,{direction:"row",spacing:2,sx:{mb:4,flexWrap:"wrap",gap:2},children:[e.jsx(T,{onClick:()=>v(!0),variant:"contained",sx:{background:"linear-gradient(135deg, #2D5BFF 0%, #1E47E6 100%)",px:3,py:1.5,borderRadius:2,fontWeight:600,textTransform:"none","&:hover":{background:"linear-gradient(135deg, #1E47E6 0%, #1538CC 100%)",transform:"translateY(-1px)"}},children:"Add Tutor"}),e.jsx(T,{onClick:()=>y(!0),variant:"outlined",sx:{borderColor:"#E4E7EB",color:"#374151",px:3,py:1.5,borderRadius:2,fontWeight:600,textTransform:"none","&:hover":{borderColor:"#2D5BFF",backgroundColor:"#EBF0FF",color:"#2D5BFF"}},children:"Create Session"})]})]}),e.jsxs(l,{container:!0,spacing:3,sx:{mb:6},children:[e.jsx(l,{item:!0,xs:12,sm:6,md:4,children:e.jsx(M,{component:U,to:"/admin/approvals",sx:{textDecoration:"none",border:"1px solid #E4E7EB",borderRadius:3,backgroundColor:"#FFFFFF",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",borderColor:"#2D5BFF"}},children:e.jsxs(z,{sx:{p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(a,{sx:{width:40,height:40,borderRadius:2,backgroundColor:"#EBF0FF",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ye,{sx:{fontSize:20,color:"#2D5BFF"}})}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:"#111827"},children:"Tutor Approvals"})]}),e.jsx(i,{variant:"body2",sx:{color:"#6B7280"},children:"Review and approve new tutor applications"})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:4,children:e.jsx(M,{component:U,to:"/admin/resources",sx:{textDecoration:"none",border:"1px solid #E4E7EB",borderRadius:3,backgroundColor:"#FFFFFF",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",borderColor:"#FF6B2C"}},children:e.jsxs(z,{sx:{p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(a,{sx:{width:40,height:40,borderRadius:2,backgroundColor:"#FFF0EB",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(he,{sx:{fontSize:20,color:"#FF6B2C"}})}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:"#111827"},children:"Resources"})]}),e.jsx(i,{variant:"body2",sx:{color:"#6B7280"},children:"Manage educational resources and materials"})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:4,children:e.jsx(M,{component:U,to:"/admin/messages",sx:{textDecoration:"none",border:"1px solid #E4E7EB",borderRadius:3,backgroundColor:"#FFFFFF",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",borderColor:"#2D5BFF"}},children:e.jsxs(z,{sx:{p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(a,{sx:{width:40,height:40,borderRadius:2,backgroundColor:"#EBF0FF",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{sx:{fontSize:20,color:"#2D5BFF"}})}),e.jsx(i,{variant:"h6",sx:{fontWeight:600,color:"#111827"},children:"Messages"})]}),e.jsx(i,{variant:"body2",sx:{color:"#6B7280"},children:"View communication history and analytics"})]})})})]}),e.jsxs(l,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(l,{size:{xs:12,sm:6,md:3},children:e.jsx(V,{in:!0,timeout:400,children:e.jsx("div",{children:e.jsx(Y,{title:"Total Tutors",value:w.totalTutors,icon:ye,trend:"+12% this month",color:"primary"})})})}),e.jsx(l,{size:{xs:12,sm:6,md:3},children:e.jsx(V,{in:!0,timeout:500,children:e.jsx("div",{children:e.jsx(Y,{title:"Total Sessions",value:w.totalSessions,icon:he,trend:"+8% this week",color:"secondary"})})})}),e.jsx(l,{size:{xs:12,sm:6,md:3},children:e.jsx(V,{in:!0,timeout:600,children:e.jsx("div",{children:e.jsx(Y,{title:"Confirmed",value:w.confirmedSessions,icon:Ke,color:"primary"})})})}),e.jsx(l,{size:{xs:12,sm:6,md:3},children:e.jsx(V,{in:!0,timeout:700,children:e.jsx("div",{children:e.jsx(Y,{title:"Pending",value:w.pendingSessions,icon:ds,color:"secondary"})})})})]}),e.jsxs(ve,{title:"Tutors",action:!C&&e.jsx(T,{variant:"contained",startIcon:e.jsx(Ve,{}),onClick:()=>v(!0),sx:{borderRadius:3,px:3},children:"Add New Tutor"}),children:[C&&e.jsx(a,{sx:{p:3,borderBottom:"1px solid rgba(224, 224, 224, 0.5)"},children:e.jsx(us,{onTutorAdded:O,onCancel:()=>v(!1)})}),e.jsx(me,{children:e.jsxs(pe,{children:[e.jsx(be,{children:e.jsxs(K,{children:[e.jsx(p,{children:"Tutor"}),e.jsx(p,{children:"Contact"}),e.jsx(p,{children:"Location"}),e.jsx(p,{align:"center",children:"Actions"})]})}),e.jsx(ge,{children:d.map(n=>{var r,t;return e.jsxs(K,{hover:!0,children:[e.jsx(p,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(le,{sx:{width:40,height:40,background:"linear-gradient(135deg, #FF9800 0%, #2196F3 100%)",fontWeight:600},children:((t=(r=n.full_name)==null?void 0:r.charAt(0))==null?void 0:t.toUpperCase())||"T"}),e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,children:n.full_name}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["ID: ",n.id.slice(0,8),"..."]})]})]})}),e.jsx(p,{children:e.jsxs(a,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(re,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(i,{variant:"body2",children:n.email})]}),n.phone_number&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xe,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(i,{variant:"body2",children:n.phone_number})]})]})}),e.jsx(p,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ae,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(i,{variant:"body2",children:n.suburb||"Not specified"})]})}),e.jsx(p,{align:"center",children:e.jsx(T,{variant:"outlined",size:"small",startIcon:e.jsx(je,{}),onClick:()=>P(n.id),sx:{borderRadius:2},children:"View Profile"})})]},n.id)})})]})})]}),e.jsxs(ve,{title:"Trial Sessions",action:!k&&e.jsx(T,{variant:"contained",startIcon:e.jsx(Ye,{}),onClick:()=>y(!0),sx:{borderRadius:3,px:3},children:"Add New Session"}),children:[k&&e.jsx(a,{sx:{p:3,borderBottom:"1px solid rgba(224, 224, 224, 0.5)"},children:e.jsx(hs,{onTrialRequestAdded:O,onCancel:()=>y(!1)})}),e.jsx(me,{children:e.jsxs(pe,{children:[e.jsx(be,{children:e.jsxs(K,{children:[e.jsx(p,{children:"Parent & Student"}),e.jsx(p,{children:"Subjects"}),e.jsx(p,{children:"Location"}),e.jsx(p,{children:"Status"}),e.jsx(p,{align:"center",children:"Actions"})]})}),e.jsx(ge,{children:u.map(n=>e.jsxs(K,{hover:!0,children:[e.jsx(p,{children:e.jsxs(a,{children:[e.jsx(i,{variant:"subtitle2",fontWeight:600,children:n.parent_name||"N/A"}),e.jsxs(i,{variant:"caption",color:"text.secondary",children:["Session #",n.id.slice(0,8),"..."]})]})}),e.jsx(p,{children:e.jsx(ue,{direction:"row",spacing:1,flexWrap:"wrap",children:n.trial_lessons&&n.trial_lessons.length>0?n.trial_lessons.map(r=>{var t;return e.jsx(Z,{label:((t=r.subjects)==null?void 0:t.name)||"Unknown Subject",size:"small",sx:{background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1) 0%, rgba(33, 150, 243, 0.1) 100%)",border:"1px solid rgba(255, 152, 0, 0.3)",fontWeight:500}},r.id)}):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No lessons"})})}),e.jsx(p,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ae,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(i,{variant:"body2",children:n.location})]})}),e.jsx(p,{children:e.jsx(Z,{label:n.status,size:"small",className:`status-chip ${n.status==="Confirmed"?"status-confirmed":"status-pending"}`})}),e.jsx(p,{align:"center",children:e.jsx(T,{component:U,to:`/session/${n.id}`,variant:"outlined",size:"small",startIcon:e.jsx(je,{}),sx:{borderRadius:2},children:"View Details"})})]},n.id))})]})})]}),e.jsxs(Ze,{open:A,onClose:F,fullWidth:!0,maxWidth:"md",className:"premium-modal",PaperProps:{sx:{borderRadius:4,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 251, 252, 0.95) 100%)",backdropFilter:"blur(20px)"}},children:[e.jsx(Xe,{sx:{pb:1},children:e.jsx(i,{variant:"h5",fontWeight:700,children:"Tutor Profile"})}),e.jsx(Qe,{sx:{pt:2},children:E?e.jsx(a,{sx:{display:"flex",justify:"center",p:4},children:e.jsx(ie,{})}):g?e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{size:{xs:12,md:4},children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[e.jsx(le,{sx:{width:100,height:100,fontSize:36,fontWeight:700,background:"linear-gradient(135deg, #FF9800 0%, #2196F3 100%)",mb:2},children:((H=(G=g.full_name)==null?void 0:G.charAt(0))==null?void 0:H.toUpperCase())||"T"}),e.jsx(i,{variant:"h6",fontWeight:600,textAlign:"center",children:g.full_name})]})}),e.jsxs(l,{size:{xs:12,md:8},children:[e.jsx(M,{sx:{p:2,background:"rgba(255, 255, 255, 0.7)",borderRadius:3},children:e.jsxs(Ne,{dense:!0,children:[e.jsxs(ne,{children:[e.jsx(re,{sx:{mr:2,color:"primary.main"}}),e.jsx(se,{primary:"Email",secondary:g.email,primaryTypographyProps:{fontWeight:600}})]}),e.jsxs(ne,{children:[e.jsx(xe,{sx:{mr:2,color:"primary.main"}}),e.jsx(se,{primary:"Phone",secondary:g.phone_number||"Not provided",primaryTypographyProps:{fontWeight:600}})]}),e.jsxs(ne,{children:[e.jsx(ae,{sx:{mr:2,color:"primary.main"}}),e.jsx(se,{primary:"Location",secondary:g.suburb||"Not provided",primaryTypographyProps:{fontWeight:600}})]})]})}),e.jsxs(a,{sx:{mt:3},children:[e.jsx(i,{variant:"h6",fontWeight:600,sx:{mb:2},children:"Teaching Subjects"}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(($=g.subjects)==null?void 0:$.length)>0?g.subjects.map(n=>e.jsx(Z,{label:n.name,sx:{background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1) 0%, rgba(33, 150, 243, 0.1) 100%)",border:"1px solid rgba(255, 152, 0, 0.3)",fontWeight:500}},n.name)):e.jsx(i,{variant:"body2",color:"text.secondary",children:"No subjects assigned yet."})})]})]})]}):null}),e.jsx(es,{sx:{p:3,pt:1},children:e.jsx(T,{onClick:F,variant:"contained",sx:{borderRadius:3,px:4},children:"Close"})})]})]})})})})}export{Is as default};
