import{r as d,u as T,j as e,B as s,F as b,C as E,a as A,T as x,b as S,c as R,D as z,P as B,s as g}from"./index-3v-V_ujV.js";import{u as D,a as L}from"./usePageTitle-seETqNZq.js";import{A as w}from"./Alert-Cd_pZj5V.js";import{E as U}from"./Email-B3e4zQ06.js";import{T as v}from"./TextField-D9X8XuqD.js";import{L as M,a as O,b as _}from"./LockReset-cFB446r2.js";import{O as q}from"./AdminPanelSettings-BxfCYMFZ.js";import"./Close-BLRrZJzV.js";import"./useControlled-2upcAsfy.js";import"./isMuiElement-Dd43ylT-.js";function re(){const[m,l]=d.useState(!1),[u,F]=d.useState(""),[h,I]=d.useState(""),[y,r]=d.useState(""),[j,a]=d.useState(""),[c,C]=d.useState(!1),[t,f]=d.useState(!1),i=T();D(t?"Reset Password":c?"Create Admin Account":"Admin Login"),d.useEffect(()=>{L("admin")},[]);const W=async o=>{o.preventDefault(),l(!0),r("");const{error:n}=await g.auth.signInWithPassword({email:u,password:h});n&&r(n.error_description||n.message),l(!1)},k=async o=>{o.preventDefault(),l(!0),r(""),a("");const{data:n}=await g.auth.signInWithPassword({email:u,password:"dummy-check"}),{data:H,error:p}=await g.auth.signUp({email:u,password:h,options:{data:{role:"admin"}}});p?p.message.includes("User already registered")?r("This email address is already registered. Please use the Sign In option instead."):r(p.error_description||p.message):(r(""),a("Sign up successful! Please check your email to verify your account."),setTimeout(()=>{C(!1),a("")},3e3)),l(!1)},P=async o=>{if(o.preventDefault(),l(!0),r(""),a(""),!u){r("Please enter your email address first."),l(!1);return}const{error:n}=await g.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/admin/login`});n?r(n.error_description||n.message):(a("Password reset email sent! Please check your inbox and follow the instructions."),setTimeout(()=>{f(!1),a("")},3e3)),l(!1)};return e.jsxs(s,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #EBF0FF 0%, #FFF0EB 100%)",padding:2,position:"relative"},children:[e.jsx(s,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:`
                        radial-gradient(circle at 25% 25%, rgba(45, 91, 255, 0.05) 0%, transparent 25%),
                        radial-gradient(circle at 75% 75%, rgba(255, 107, 44, 0.05) 0%, transparent 25%)
                    `,zIndex:1}}),e.jsx(b,{in:!0,timeout:800,children:e.jsx(E,{sx:{maxWidth:440,width:"100%",backgroundColor:"#FFFFFF",border:"1px solid #E4E7EB",borderRadius:3,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",position:"relative",zIndex:2},children:e.jsxs(A,{sx:{p:6},children:[e.jsxs(s,{sx:{textAlign:"center",mb:5},children:[e.jsx(s,{sx:{width:64,height:64,margin:"0 auto 24px",borderRadius:2,background:"linear-gradient(135deg, #2D5BFF 0%, #FF6B2C 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"24px",fontWeight:700},children:"TC"}),e.jsx(x,{variant:"h4",sx:{fontWeight:700,color:"#111827",mb:1},children:"TutorCraft"}),e.jsx(x,{variant:"body1",sx:{color:"#6B7280",fontWeight:500},children:t?"Reset your password":c?"Create your admin account":"Sign in to continue"})]}),y&&e.jsx(b,{in:!0,children:e.jsx(w,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:20}},children:y})}),j&&e.jsx(b,{in:!0,children:e.jsx(w,{severity:"success",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:20}},children:j})}),e.jsxs(s,{component:"form",onSubmit:t?P:c?k:W,sx:{width:"100%"},children:[e.jsxs(s,{sx:{mb:3},children:[e.jsxs(x,{variant:"body2",sx:{fontWeight:600,color:"text.primary",mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{sx:{fontSize:18}}),"Email Address"]}),e.jsx(v,{fullWidth:!0,type:"email",value:u,onChange:o=>F(o.target.value),required:!0,placeholder:"Enter your email address",sx:{"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:"rgba(248, 249, 250, 0.8)","& fieldset":{borderColor:"rgba(0, 0, 0, 0.12)"},"&:hover fieldset":{borderColor:i.palette.primary.main},"&.Mui-focused fieldset":{borderColor:i.palette.primary.main,borderWidth:"2px"}}}})]}),!t&&e.jsxs(s,{sx:{mb:4},children:[e.jsxs(x,{variant:"body2",sx:{fontWeight:600,color:"text.primary",mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(M,{sx:{fontSize:18}}),"Password"]}),e.jsx(v,{fullWidth:!0,type:"password",value:h,onChange:o=>I(o.target.value),required:!0,placeholder:"Enter your password",sx:{"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:"rgba(248, 249, 250, 0.8)","& fieldset":{borderColor:"rgba(0, 0, 0, 0.12)"},"&:hover fieldset":{borderColor:i.palette.primary.main},"&.Mui-focused fieldset":{borderColor:i.palette.primary.main,borderWidth:"2px"}}}})]}),!c&&!t&&e.jsx(s,{sx:{textAlign:"right",mb:3},children:e.jsx(O,{component:"button",type:"button",onClick:()=>f(!0),sx:{fontSize:"0.875rem",fontWeight:500,color:i.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Forgot your password?"})}),e.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",disabled:m,startIcon:m?e.jsx(R,{size:20,color:"inherit"}):t?e.jsx(_,{}):e.jsx(q,{}),sx:{py:1.5,borderRadius:3,fontSize:"1rem",fontWeight:600,textTransform:"none",background:"linear-gradient(135deg, #FF9800 0%, #2196F3 100%)",boxShadow:"0px 8px 24px rgba(255, 152, 0, 0.3)",mb:3,"&:hover":{background:"linear-gradient(135deg, #F57C00 0%, #1976D2 100%)",boxShadow:"0px 12px 32px rgba(255, 152, 0, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, rgba(255, 152, 0, 0.5) 0%, rgba(33, 150, 243, 0.5) 100%)",color:"white"},transition:"all 0.3s ease-in-out"},children:m?"Processing...":t?"Send Reset Email":c?"Create Admin Account":"Sign In to Dashboard"}),e.jsx(z,{sx:{mb:3,"&::before, &::after":{borderColor:"rgba(0, 0, 0, 0.12)"}},children:e.jsx(x,{variant:"body2",color:"text.secondary",sx:{px:2,fontWeight:500},children:"or"})}),e.jsx(S,{fullWidth:!0,variant:"outlined",onClick:()=>{t?(f(!1),r(""),a("")):(C(!c),r(""),a(""))},startIcon:e.jsx(B,{}),sx:{py:1.5,borderRadius:3,fontSize:"1rem",fontWeight:600,textTransform:"none",borderWidth:"2px",borderColor:i.palette.primary.main,color:i.palette.primary.main,"&:hover":{borderWidth:"2px",borderColor:i.palette.primary.dark,backgroundColor:"rgba(255, 152, 0, 0.04)",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:t?"Back to Sign In":c?"Already have an account? Sign In":"Need an account? Sign Up"})]}),e.jsx(s,{sx:{textAlign:"center",mt:4,pt:3,borderTop:"1px solid rgba(0, 0, 0, 0.08)"},children:e.jsx(x,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:"Secure admin access to TutorCraft platform"})})]})})})]})}export{re as default};
