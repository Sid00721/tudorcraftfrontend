import{d as oe,g as le,q as G,j as e,r as x,h as ce,$ as xe,a0 as J,i as q,k as X,l as W,m as de,n as Y,a3 as ge,f as F,o as ee,B as w,c as ye,T as r,z as he,b as V,a6 as ve,C as be,a as fe,w as N,M as Z,y as te}from"./index-3v-V_ujV.js";import{A as me,a as je,E as Ce,b as Se}from"./ExpandMore-XLMqhgyC.js";import{A as Me}from"./Analytics-lIFs4u_p.js";import{G as g}from"./Grid-CWEeYFsZ.js";import{T as Q,F as ae,I as se,S as ne}from"./TextField-D9X8XuqD.js";import{T as Pe,a as Te,b as Ie,c as ie,d as v,e as $e}from"./TableRow-Ch5q5_jA.js";import{f as re}from"./index-DyFXVJrh.js";import{u as ze}from"./useControlled-2upcAsfy.js";import{D as Re,a as ke,b as Ae,c as De}from"./DialogTitle-DjXGIgXC.js";import"./isMuiElement-Dd43ylT-.js";import"./format-CyxUvML0.js";function we(t){return oe("MuiPagination",t)}le("MuiPagination",["root","ul","outlined","text"]);function Oe(t={}){const{boundaryCount:a=1,componentName:n="usePagination",count:o=1,defaultPage:m=1,disabled:z=!1,hideNextButton:c=!1,hidePrevButton:j=!1,onChange:C,page:S,showFirstButton:k=!1,showLastButton:O=!1,siblingCount:M=1,...$}=t,[h,b]=ze({controlled:S,default:m,name:n,state:"page"}),P=(i,p)=>{S||b(p),C&&C(i,p)},A=(i,p)=>{const B=p-i+1;return Array.from({length:B},(E,_)=>i+_)},f=A(1,Math.min(a,o)),d=A(Math.max(o-a+1,a+1),o),T=Math.max(Math.min(h-M,o-a-M*2-1),a+2),I=Math.min(Math.max(h+M,a+M*2+2),o-a-1),L=[...k?["first"]:[],...j?[]:["previous"],...f,...T>a+2?["start-ellipsis"]:a+1<o-a?[a+1]:[],...A(T,I),...I<o-a-1?["end-ellipsis"]:o-a>a?[o-a]:[],...d,...c?[]:["next"],...O?["last"]:[]],R=i=>{switch(i){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return o;default:return null}};return{items:L.map(i=>typeof i=="number"?{onClick:p=>{P(p,i)},type:"page",page:i,selected:i===h,disabled:z,"aria-current":i===h?"page":void 0}:{onClick:p=>{P(p,R(i))},type:i,page:R(i),selected:!1,disabled:z||!i.includes("ellipsis")&&(i==="next"||i==="last"?h>=o:h<=1)}),...$}}function Le(t){return oe("MuiPaginationItem",t)}const y=le("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),Be=G(e.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),Ne=G(e.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),_e=G(e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Fe=G(e.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),pe=(t,a)=>{const{ownerState:n}=t;return[a.root,a[n.variant],a[`size${W(n.size)}`],n.variant==="text"&&a[`text${W(n.color)}`],n.variant==="outlined"&&a[`outlined${W(n.color)}`],n.shape==="rounded"&&a.rounded,n.type==="page"&&a.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&a.ellipsis,(n.type==="previous"||n.type==="next")&&a.previousNext,(n.type==="first"||n.type==="last")&&a.firstLast]},We=t=>{const{classes:a,color:n,disabled:o,selected:m,size:z,shape:c,type:j,variant:C}=t,S={root:["root",`size${W(z)}`,C,c,n!=="standard"&&`color${W(n)}`,n!=="standard"&&`${C}${W(n)}`,o&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[j]],icon:["icon"]};return de(S,Le,a)},Ee=q("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:pe})(Y(({theme:t})=>({...t.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:{size:"small"},style:{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)}}]}))),He=q(ge,{name:"MuiPaginationItem",slot:"Root",overridesResolver:pe})(Y(({theme:t})=>({...t.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${y.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:F(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:F(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${y.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}},variants:[{props:{size:"small"},style:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"}},{props:{size:"large"},style:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)}},{props:{shape:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"outlined"},style:{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${y.selected}`]:{[`&.${y.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}}}},{props:{variant:"text"},style:{[`&.${y.selected}`]:{[`&.${y.disabled}`]:{color:(t.vars||t).palette.action.disabled}}}},...Object.entries(t.palette).filter(ee(["dark","contrastText"])).map(([a])=>({props:{variant:"text",color:a},style:{[`&.${y.selected}`]:{color:(t.vars||t).palette[a].contrastText,backgroundColor:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:(t.vars||t).palette[a].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a].main}},[`&.${y.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a].dark},[`&.${y.disabled}`]:{color:(t.vars||t).palette.action.disabled}}}})),...Object.entries(t.palette).filter(ee(["light"])).map(([a])=>({props:{variant:"outlined",color:a},style:{[`&.${y.selected}`]:{color:(t.vars||t).palette[a].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a].mainChannel} / 0.5)`:F(t.palette[a].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:F(t.palette[a].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:F(t.palette[a].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:F(t.palette[a].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}}}}))]}))),Ue=q("div",{name:"MuiPaginationItem",slot:"Icon"})(Y(({theme:t})=>({fontSize:t.typography.pxToRem(20),margin:"0 -8px",variants:[{props:{size:"small"},style:{fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:t.typography.pxToRem(22)}}]}))),Ve=x.forwardRef(function(a,n){const o=ce({props:a,name:"MuiPaginationItem"}),{className:m,color:z="standard",component:c,components:j={},disabled:C=!1,page:S,selected:k=!1,shape:O="circular",size:M="medium",slots:$={},slotProps:h={},type:b="page",variant:P="text",...A}=o,f={...o,color:z,disabled:C,selected:k,shape:O,size:M,type:b,variant:P},d=xe(),T=We(f),I={slots:{previous:$.previous??j.previous,next:$.next??j.next,first:$.first??j.first,last:$.last??j.last},slotProps:h},[L,R]=J("previous",{elementType:_e,externalForwardedProps:I,ownerState:f}),[D,i]=J("next",{elementType:Fe,externalForwardedProps:I,ownerState:f}),[p,B]=J("first",{elementType:Be,externalForwardedProps:I,ownerState:f}),[E,_]=J("last",{elementType:Ne,externalForwardedProps:I,ownerState:f}),H=d?{previous:"next",next:"previous",first:"last",last:"first"}[b]:b,U={previous:L,next:D,first:p,last:E}[H],s={previous:R,next:i,first:B,last:_}[H];return b==="start-ellipsis"||b==="end-ellipsis"?e.jsx(Ee,{ref:n,ownerState:f,className:X(T.root,m),children:"â€¦"}):e.jsxs(He,{ref:n,ownerState:f,component:c,disabled:C,className:X(T.root,m),...A,children:[b==="page"&&S,U?e.jsx(Ue,{...s,className:T.icon,as:U}):null]})}),Ge=t=>{const{classes:a,variant:n}=t;return de({root:["root",n],ul:["ul"]},we,a)},qe=q("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,a[n.variant]]}})({}),Je=q("ul",{name:"MuiPagination",slot:"Ul"})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ze(t,a,n){return t==="page"?`${n?"":"Go to "}page ${a}`:`Go to ${t} page`}const Ke=x.forwardRef(function(a,n){const o=ce({props:a,name:"MuiPagination"}),{boundaryCount:m=1,className:z,color:c="standard",count:j=1,defaultPage:C=1,disabled:S=!1,getItemAriaLabel:k=Ze,hideNextButton:O=!1,hidePrevButton:M=!1,onChange:$,page:h,renderItem:b=p=>e.jsx(Ve,{...p}),shape:P="circular",showFirstButton:A=!1,showLastButton:f=!1,siblingCount:d=1,size:T="medium",variant:I="text",...L}=o,{items:R}=Oe({...o,componentName:"Pagination"}),D={...o,boundaryCount:m,color:c,count:j,defaultPage:C,disabled:S,getItemAriaLabel:k,hideNextButton:O,hidePrevButton:M,renderItem:b,shape:P,showFirstButton:A,showLastButton:f,siblingCount:d,size:T,variant:I},i=Ge(D);return e.jsx(qe,{"aria-label":"pagination navigation",className:X(i.root,z),ownerState:D,ref:n,...L,children:e.jsx(Je,{className:i.ul,ownerState:D,children:R.map((p,B)=>e.jsx("li",{children:b({...p,color:c,"aria-label":k(p.type,p.page,p.selected),shape:P,size:T,variant:I})},B))})})}),Qe=G(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),Xe="https://tutor-matching-backend.onrender.com";function dt(){var H,U;const[t,a]=x.useState(!0),[n,o]=x.useState([]),[m,z]=x.useState({}),[c,j]=x.useState(null),[C,S]=x.useState(!1),[k,O]=x.useState(!1),[M,$]=x.useState(1),[h,b]=x.useState(1),[P]=x.useState(25),[A,f]=x.useState(0),[d,T]=x.useState({sessionId:"",messageType:"",recipientType:"",startDate:"",endDate:"",search:""}),I=[{value:"outreach",label:"Outreach"},{value:"reminder",label:"Reminder"},{value:"notification",label:"Notification"},{value:"reschedule",label:"Reschedule"},{value:"cancellation",label:"Cancellation"},{value:"diagnostic",label:"Diagnostic"}],L=[{value:"parent",label:"Parent"},{value:"tutor",label:"Tutor"},{value:"admin",label:"Admin"}],R=x.useCallback(async()=>{a(!0);try{const s=new URLSearchParams({limit:P.toString(),offset:((M-1)*P).toString()});Object.entries(d).forEach(([ue,K])=>{K&&K.trim()&&s.append(ue,K.trim())});const l=await fetch(`${Xe}/api/admin/message-history?${s}`),u=await l.json();l.ok?(o(u.messageHistory||[]),f(u.total||0),b(Math.ceil((u.total||0)/P))):console.error("Error fetching message history:",u.error)}catch(s){console.error("Failed to fetch message history:",s)}finally{a(!1)}},[M,P,d]),D=x.useCallback(async()=>{try{const s=new URLSearchParams;d.startDate&&s.append("startDate",d.startDate),d.endDate&&s.append("endDate",d.endDate);const l={totalMessages:n.length,messagesByType:{},messagesByRecipient:{},failedMessages:0};n.forEach(u=>{l.messagesByType[u.message_type]=(l.messagesByType[u.message_type]||0)+1,l.messagesByRecipient[u.recipient_type]=(l.messagesByRecipient[u.recipient_type]||0)+1,u.delivery_status==="failed"&&l.failedMessages++}),z(l)}catch(s){console.error("Failed to fetch analytics:",s)}},[n,d.startDate,d.endDate]);x.useEffect(()=>{R()},[R]),x.useEffect(()=>{n.length>0&&D()},[D]);const i=(s,l)=>{T(u=>({...u,[s]:l})),$(1)},p=()=>{T({sessionId:"",messageType:"",recipientType:"",startDate:"",endDate:"",search:""}),$(1)},B=s=>{j(s),S(!0)},E=s=>{const l={sent:{color:"info",label:"Sent"},delivered:{color:"success",label:"Delivered"},failed:{color:"error",label:"Failed"},bounced:{color:"warning",label:"Bounced"}},u=l[s]||l.sent;return e.jsx(te,{size:"small",color:u.color,label:u.label})},_=s=>{const l={outreach:{color:"primary",label:"Outreach"},reminder:{color:"warning",label:"Reminder"},notification:{color:"info",label:"Notification"},reschedule:{color:"secondary",label:"Reschedule"},cancellation:{color:"error",label:"Cancellation"},diagnostic:{color:"success",label:"Diagnostic"}},u=l[s]||l.notification;return e.jsx(te,{size:"small",variant:"outlined",color:u.color,label:u.label})};return t&&n.length===0?e.jsx(w,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ye,{})}):e.jsxs(w,{sx:{p:3},children:[e.jsxs(w,{display:"flex",justifyContent:"between",alignItems:"center",mb:3,children:[e.jsx(r,{variant:"h4",component:"h1",children:"ðŸ“§ Message History & Communication Analytics"}),e.jsxs(he,{direction:"row",spacing:2,children:[e.jsx(V,{variant:"outlined",startIcon:e.jsx(Me,{}),onClick:()=>O(!k),children:"Analytics"}),e.jsx(V,{variant:"outlined",startIcon:e.jsx(ve,{}),onClick:R,disabled:t,children:"Refresh"})]})]}),k&&e.jsx(be,{sx:{mb:3},children:e.jsxs(fe,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Communication Analytics"}),e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(N,{sx:{p:2,textAlign:"center"},children:[e.jsx(r,{variant:"h4",color:"primary",children:A.toLocaleString()}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Total Messages"})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(N,{sx:{p:2,textAlign:"center"},children:[e.jsx(r,{variant:"h4",color:"error",children:m.failedMessages||0}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Failed Messages"})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(N,{sx:{p:2,textAlign:"center"},children:[e.jsx(r,{variant:"h4",color:"info",children:((H=m.messagesByType)==null?void 0:H.outreach)||0}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Outreach Messages"})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(N,{sx:{p:2,textAlign:"center"},children:[e.jsx(r,{variant:"h4",color:"warning",children:((U=m.messagesByType)==null?void 0:U.reminder)||0}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Reminder Messages"})]})})]})]})}),e.jsxs(me,{sx:{mb:3},children:[e.jsxs(je,{expandIcon:e.jsx(Ce,{}),children:[e.jsx(Qe,{sx:{mr:1}}),e.jsx(r,{children:"Advanced Filters"})]}),e.jsx(Se,{children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{item:!0,xs:12,sm:6,md:2,children:e.jsx(Q,{label:"Session ID",value:d.sessionId,onChange:s=>i("sessionId",s.target.value),size:"small",fullWidth:!0})}),e.jsx(g,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(ae,{size:"small",fullWidth:!0,children:[e.jsx(se,{children:"Message Type"}),e.jsxs(ne,{value:d.messageType,label:"Message Type",onChange:s=>i("messageType",s.target.value),children:[e.jsx(Z,{value:"",children:"All Types"}),I.map(s=>e.jsx(Z,{value:s.value,children:s.label},s.value))]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(ae,{size:"small",fullWidth:!0,children:[e.jsx(se,{children:"Recipient Type"}),e.jsxs(ne,{value:d.recipientType,label:"Recipient Type",onChange:s=>i("recipientType",s.target.value),children:[e.jsx(Z,{value:"",children:"All Recipients"}),L.map(s=>e.jsx(Z,{value:s.value,children:s.label},s.value))]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,md:2,children:e.jsx(Q,{label:"Start Date",type:"date",value:d.startDate,onChange:s=>i("startDate",s.target.value),size:"small",fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(g,{item:!0,xs:12,sm:6,md:2,children:e.jsx(Q,{label:"End Date",type:"date",value:d.endDate,onChange:s=>i("endDate",s.target.value),size:"small",fullWidth:!0,InputLabelProps:{shrink:!0}})}),e.jsx(g,{item:!0,xs:12,sm:6,md:2,children:e.jsx(V,{variant:"outlined",onClick:p,fullWidth:!0,children:"Clear Filters"})})]})})]}),e.jsxs(N,{children:[e.jsx(Pe,{children:e.jsxs(Te,{children:[e.jsx(Ie,{children:e.jsxs(ie,{children:[e.jsx(v,{children:e.jsx("strong",{children:"Date & Time"})}),e.jsx(v,{children:e.jsx("strong",{children:"Session"})}),e.jsx(v,{children:e.jsx("strong",{children:"Type"})}),e.jsx(v,{children:e.jsx("strong",{children:"Recipient"})}),e.jsx(v,{children:e.jsx("strong",{children:"Subject"})}),e.jsx(v,{children:e.jsx("strong",{children:"Status"})}),e.jsx(v,{children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx($e,{children:n.map(s=>{var l;return e.jsxs(ie,{hover:!0,children:[e.jsx(v,{children:e.jsx(r,{variant:"body2",children:re(new Date(s.sent_at),"Australia/Sydney","dd/MM/yyyy HH:mm")})}),e.jsxs(v,{children:[e.jsx(r,{variant:"body2",children:((l=s.trial_sessions)==null?void 0:l.parent_name)||"N/A"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:[s.session_id.slice(0,8),"..."]})]}),e.jsx(v,{children:_(s.message_type)}),e.jsxs(v,{children:[e.jsx(r,{variant:"body2",sx:{textTransform:"capitalize"},children:s.recipient_type}),e.jsx(r,{variant:"caption",color:"text.secondary",children:s.recipient_email})]}),e.jsx(v,{children:e.jsx(r,{variant:"body2",sx:{maxWidth:200},noWrap:!0,children:s.message_subject||"No subject"})}),e.jsx(v,{children:E(s.delivery_status)}),e.jsx(v,{children:e.jsx(V,{size:"small",onClick:()=>B(s),children:"View"})})]},s.id)})})]})}),n.length===0&&!t&&e.jsx(w,{p:4,textAlign:"center",children:e.jsx(r,{color:"text.secondary",children:"No message history found. Try adjusting your filters."})}),h>1&&e.jsx(w,{p:2,display:"flex",justifyContent:"center",children:e.jsx(Ke,{count:h,page:M,onChange:(s,l)=>$(l),color:"primary"})})]}),e.jsxs(Re,{open:C,onClose:()=>S(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(ke,{children:["Message Details",c&&e.jsxs(w,{display:"flex",alignItems:"center",gap:1,mt:1,children:[_(c.message_type),E(c.delivery_status)]})]}),e.jsx(Ae,{children:c&&e.jsxs(w,{children:[e.jsxs(g,{container:!0,spacing:2,sx:{mb:2},children:[e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Sent At"}),e.jsx(r,{variant:"body2",children:re(new Date(c.sent_at),"Australia/Sydney","EEEE, d MMMM yyyy @ h:mm a zzz")})]}),e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Recipient"}),e.jsxs(r,{variant:"body2",children:[c.recipient_email," (",c.recipient_type,")"]})]}),e.jsxs(g,{item:!0,xs:12,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",children:"Subject"}),e.jsx(r,{variant:"body2",children:c.message_subject||"No subject"})]})]}),e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Message Content"}),e.jsx(N,{sx:{p:2,bgcolor:"grey.50",maxHeight:300,overflow:"auto"},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:c.message_content}})}),c.metadata&&Object.keys(c.metadata).length>0&&e.jsxs(w,{mt:2,children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Metadata"}),e.jsx(N,{sx:{p:2,bgcolor:"grey.50"},children:e.jsx("pre",{style:{fontSize:"12px",margin:0,whiteSpace:"pre-wrap"},children:JSON.stringify(c.metadata,null,2)})})]})]})}),e.jsx(De,{children:e.jsx(V,{onClick:()=>S(!1),children:"Close"})})]})]})}export{dt as default};
